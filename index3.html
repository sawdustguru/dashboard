<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSV Data Display</title>
    <style>
        .bar {
            height: 20px;
            width: 200px; /* Fixed width for bars */
            margin: 5px 0;
            border-radius: 5px;
            transition: width 0.5s ease;
            display: inline-block; /* Ensure bars are displayed inline */
            overflow: hidden; /* Ensure segments do not overflow */
        }
        .segment {
            height: 100%;
            float: left; /* Float segments left */
        }
        .segment1 { width: 25%; background-color: red; }
        .segment2 { width: 25%; background-color: yellow; }
        .segment3 { width: 25%; background-color: orange; }
        .segment4 { width: 25%; background-color: green; }
        .column1 { width: 50px; }
        .column2 { width: 100px; }
    </style>
    <script>
        window.onload = function() {
            const table = document.getElementById('dataTable');
            
            // Function to load CSV data
            function loadCSV() {
                const xhr = new XMLHttpRequest();
                xhr.onreadystatechange = function() {
                    if (xhr.readyState === XMLHttpRequest.DONE) {
                        if (xhr.status === 200) {
                            parseCSV(xhr.responseText);
                        } else {
                            console.error('Failed to load CSV file');
                        }
                    }
                };
                xhr.open('GET', 'hours.csv');
                xhr.send();
            }
            
            // Function to parse CSV data
            function parseCSV(csvData) {
                const lines = csvData.split('\n');
                table.innerHTML = ''; // Clear existing table content
                lines.forEach(function(line) {
                    const rowData = line.split(',');
                    if (rowData[0]) { // Check if data exists
                        const row = document.createElement('tr');
                        
                        // Create and style column 1
                        const cell1 = document.createElement('td');
                        cell1.textContent = rowData[0]; // Display value of column 1
                        cell1.classList.add('column1');
                        row.appendChild(cell1);
                        
                        // Create and style column 2
                        const cell2 = document.createElement('td');
                        const bar = document.createElement('div');
                        bar.className = 'bar';
                        setColorSegments(bar, parseInt(rowData[1]));
                        cell2.appendChild(bar);
                        cell2.classList.add('column2');
                        row.appendChild(cell2);
                        
                        table.appendChild(row);
                    }
                });
            }
            
            // Function to set color segments based on value
            function setColorSegments(bar, value) {
                const segment1 = document.createElement('div');
                segment1.className = 'segment segment1';
                const segment2 = document.createElement('div');
                segment2.className = 'segment segment2';
                const segment3 = document.createElement('div');
                segment3.className = 'segment segment3';
                const segment4 = document.createElement('div');
                segment4.className = 'segment segment4';
                
                if (value < 25) {
                    segment1.style.width = value + '%';
                } else if (value < 50) {
                    segment1.style.width = '25%';
                    segment2.style.width = (value - 25) + '%';
                } else if (value < 75) {
                    segment1.style.width = '25%';
                    segment2.style.width = '25%';
                    segment3.style.width = (value - 50) + '%';
                } else {
                    segment1.style.width = '25%';
                    segment2.style.width = '25%';
                    segment3.style.width = '25%';
                    segment4.style.width = (value - 75) + '%';
                }
                
                bar.appendChild(segment1);
                bar.appendChild(segment2);
                bar.appendChild(segment3);
                bar.appendChild(segment4);
            }
            
            // Load CSV data on page load
            loadCSV();
        };
    </script>
</head>
<body>
    <p>This is a text block above the table.</p>
    <table id="dataTable" border="1"></table>
</body>
</html>
