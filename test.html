<!DOCTYPE html>
<html>
<head>
    <title>Plotly.js Dynamic Color Gauge Example</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body>

<div id="gauge-chart" style="width:600px;height:400px;"></div>

<script>
    var gaugeValue = 350; // Example current value

    var data = [{
        type: "indicator",
        mode: "gauge+number",
        value: gaugeValue,
        title: { text: "Dynamic Color Gauge", font: { size: 24 } },
        gauge: {
            axis: { range: [null, 500], tickwidth: 1, tickcolor: "darkblue" },
            // The bar color does not dynamically change in this setup
            bar: { color: "lightgray" }, // Use a neutral color for the bar itself
            bgcolor: "white",
            borderwidth: 2,
            bordercolor: "gray",
            steps: [
                { range: [0, 300], color: "red" }, // Color before the threshold
                { range: [300, 500], color: "green" } // Color after the threshold
            ],
            // Optionally, highlight the threshold with a line or thicker step
            threshold: {
                line: { color: "blue", width: 4 },
                thickness: 0.75,
                value: 300 // Your dynamic threshold
            }
        }
    }];

    var layout = { width: 600, height: 400, margin: { t: 25, r: 25, l: 25, b: 25 } };
    Plotly.newPlot('gauge-chart', data, layout);
</script>

</body>
</html>
